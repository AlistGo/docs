import{d as k,h as S,u as e,o as a,F as c,w as n,e as f,I as m,au as x,a as i,b4 as I,N as h,aw as P,b5 as T,b6 as B,b as V,_ as y,r as z,c as j}from"./app-ThyR28W4.js";import{N as v}from"./Alert-57sBsboq.js";import{N as E}from"./Input-BD527oV6.js";import"./browser-FkKAkcim.js";const O=r=>(T("data-v-0df89ce2"),r=r(),B(),r),A=O(()=>V("b",null,"refresh_token:",-1)),D=k({__name:"Callback",setup(r){const o=new URL(window.location.href),l=o.searchParams.get("code"),s=o.searchParams.get("error"),N=o.searchParams.get("error_description"),b=o.searchParams.get("state")||"::",[g,C]=b.split("::"),t=S();return l&&!s&&(async()=>{const _=await(await fetch(P()+"/alist/ali_open/code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:l,grant_type:"authorization_code",client_id:g,client_secret:C})})).json();t.value=_})(),(w,_)=>!e(l)||e(s)?(a(),c(e(v),{key:0,title:e(s)||"Error",type:"error"},{default:n(()=>[f(m(e(N)),1)]),_:1},8,["title"])):(a(),c(e(h),{key:1,vertical:"",size:"large"},{default:n(()=>{var p,u,d;return[(p=t.value)!=null&&p.error||(u=t.value)!=null&&u.error?(a(),c(e(v),{key:0,title:(d=t.value)==null?void 0:d.error,type:"error"},{default:n(()=>[f(m(t.value.error),1)]),_:1},8,["title"])):x("v-if",!0),i(e(h),{vertical:""},{default:n(()=>[A,t.value?(a(),c(e(E),{key:1,type:"textarea",autosize:"",readonly:"",value:t.value.refresh_token},null,8,["value"])):(a(),c(e(I),{key:0}))]),_:1})]}),_:1}))}}),F=y(D,[["__scopeId","data-v-0df89ce2"],["__file","Callback.vue"]]),J=k({__name:"callback.html",setup(r){return(o,l)=>{const s=z("NaiveClient");return a(),j("div",null,[i(s,null,{default:n(()=>[i(e(F))]),_:1})])}}}),G=y(J,[["__file","callback.html.vue"]]);export{G as default};

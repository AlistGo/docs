import{d as h,O as N,V as v,ag as S,$ as C,_ as g,a0 as c,o,g as i,f as y,Y as k,a1 as A,a as _,e as T,c as x,r as w}from"./app-CwkdwUrf.js";import{N as P}from"./Input-neduBEMU.js";import{N as O}from"./Alert-1vHi6Qdq.js";import"./browser-VosF3XWB.js";const j=h({__name:"Callback",setup(p,{expose:r}){r();const t=new URL(window.location.href),e=t.searchParams.get("code"),s=t.searchParams.get("error"),d=t.searchParams.get("error_description"),a=t.searchParams.get("state")||"Ojo=",[n,l]=window.atob(a).split("::"),m=N(),u=async()=>{const b=await(await fetch(v()+"/alist/ali_open/code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e,grant_type:"authorization_code",client_id:n,client_secret:l})})).json();m.value=b};e&&!s&&u();const f={url:t,code:e,error:s,error_description:d,state:a,client_id:n,client_secret:l,token:m,getToken:u,get NAlert(){return O},get NSpace(){return C},get NSpin(){return S},get NInput(){return P}};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}});function R(p,r,t,e,s,d){return!e.code||e.error?(o(),c(e.NAlert,{key:0,title:e.error||"Error",type:"error"},{default:i(()=>[y(k(e.error_description),1)]),_:1},8,["title"])):(o(),c(e.NSpace,{key:1,vertical:"",size:"large"},{default:i(()=>{var a,n,l;return[(a=e.token)!=null&&a.error||(n=e.token)!=null&&n.error?(o(),c(e.NAlert,{key:0,title:(l=e.token)==null?void 0:l.error,type:"error"},{default:i(()=>[y(k(e.token.error),1)]),_:1},8,["title"])):A("",!0),_(e.NSpace,{vertical:""},{default:i(()=>[r[0]||(r[0]=T("b",null,"refresh_token:",-1)),e.token?(o(),c(e.NInput,{key:1,type:"textarea",autosize:"",readonly:"",value:e.token.refresh_token},null,8,["value"])):(o(),c(e.NSpin,{key:0}))]),_:1})]}),_:1}))}const V=g(j,[["render",R],["__scopeId","data-v-5c4a4ac9"],["__file","Callback.vue"]]),z=h({__name:"callback.html",setup(p,{expose:r}){r();const t={get Callback(){return V}};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}});function B(p,r,t,e,s,d){const a=w("NaiveClient");return o(),x("div",null,[_(a,null,{default:i(()=>[_(e.Callback)]),_:1})])}const E=g(z,[["render",B],["__file","callback.html.vue"]]),J=JSON.parse('{"path":"/tool/aliyundrive/callback.html","title":"Aliyundrive Refresh Token Callback","lang":"en-US","frontmatter":{"title":"Aliyundrive Refresh Token Callback","toc":false,"comment":false,"head":[["meta",{"property":"og:url","content":"https://alist.nn.ci/tool/aliyundrive/callback.html"}],["meta",{"property":"og:site_name","content":"AList Docs"}],["meta",{"property":"og:title","content":"Aliyundrive Refresh Token Callback"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2023-03-01T16:12:40.000Z"}],["meta",{"property":"article:modified_time","content":"2023-03-01T16:12:40.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Aliyundrive Refresh Token Callback\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-03-01T16:12:40.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Andy Hsu\\",\\"url\\":\\"https://i.nn.ci\\"}]}"]]},"headers":[],"git":{"createdTime":1676541915000,"updatedTime":1677687160000,"contributors":[{"name":"Andy Hsu","username":"Andy Hsu","email":"i@nn.ci","commits":5,"url":"https://github.com/Andy Hsu"}]},"readingTime":{"minutes":0.07,"words":22},"filePathRelative":"tool/aliyundrive/callback.md","localizedDate":"February 16, 2023"}');export{E as comp,J as data};

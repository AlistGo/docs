import{d as h,O as x,ag as S,ac as v,_ as g,ad as s,o,g as _,f as d,Y as p,e as n,ae as C,a as k,c as T,r as A}from"./app-7wOqNy3E.js";import{N as P}from"./Input-DoOzSYSz.js";import{N as w}from"./Alert-vDUGwyKa.js";import"./browser-Hv7mtnOh.js";const b="a78d5a69054042fa936f6c77f9a0ae8b",y="9c119bbb04b346d2a52aa64401936b2b",R="https://alist.nn.ci/tool/yandex/callback",O=h({__name:"Callback",setup(u,{expose:t}){t();const r=new URL(window.location.href),e=r.searchParams.get("code"),m=r.searchParams.get("error"),f=r.searchParams.get("error_description"),a=x(),l=async()=>{const i=new URLSearchParams;i.append("grant_type","authorization_code"),i.append("client_id",b),i.append("client_secret",y),i.append("code",e||"");const N=await(await fetch("https://oauth.yandex.com/token",{method:"POST",body:i})).json();a.value=N};e&&!m&&l();const c={client_id:b,client_secret:y,callback_uri:R,url:r,code:e,error:m,error_description:f,token:a,getToken:l,get NAlert(){return w},get NSpace(){return v},get NSpin(){return S},get NInput(){return P}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function Y(u,t,r,e,m,f){return!e.code||e.error?(o(),s(e.NAlert,{key:0,title:e.error||"Error",type:"error"},{default:_(()=>[d(p(e.error_description),1)]),_:1},8,["title"])):(o(),s(e.NSpace,{key:1,vertical:"",size:"large"},{default:_(()=>{var a,l,c;return[n("p",null,[t[0]||(t[0]=n("b",null,"client_id: ",-1)),d(p(e.client_id))]),n("p",null,[t[1]||(t[1]=n("b",null,"client_secret: ",-1)),d(p(e.client_secret))]),n("p",null,[t[2]||(t[2]=n("b",null,"redirect_uri: ",-1)),d(p(e.callback_uri))]),(a=e.token)!=null&&a.error||(l=e.token)!=null&&l.error_description?(o(),s(e.NAlert,{key:0,title:(c=e.token)==null?void 0:c.error,type:"error"},{default:_(()=>[d(p(e.token.error_description),1)]),_:1},8,["title"])):C("",!0),k(e.NSpace,{vertical:""},{default:_(()=>[t[3]||(t[3]=n("b",null,"refresh_token:",-1)),e.token?(o(),s(e.NInput,{key:1,type:"textarea",autosize:"",readonly:"",value:e.token.refresh_token},null,8,["value"])):(o(),s(e.NSpin,{key:0}))]),_:1})]}),_:1}))}const j=g(O,[["render",Y],["__scopeId","data-v-ceb76725"],["__file","Callback.vue"]]),z=h({__name:"callback.html",setup(u,{expose:t}){t();const r={get Callback(){return j}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}});function B(u,t,r,e,m,f){const a=A("NaiveClient");return o(),T("div",null,[k(a,null,{default:_(()=>[k(e.Callback)]),_:1})])}const L=g(z,[["render",B],["__file","callback.html.vue"]]),Z=JSON.parse('{"path":"/tool/yandex/callback.html","title":"Yandex Refresh Token Callback","lang":"en-US","frontmatter":{"title":"Yandex Refresh Token Callback","toc":false,"head":[["meta",{"property":"og:url","content":"https://alist.nn.ci/tool/yandex/callback.html"}],["meta",{"property":"og:site_name","content":"AList Docs"}],["meta",{"property":"og:title","content":"Yandex Refresh Token Callback"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2023-02-16T13:32:22.000Z"}],["meta",{"property":"article:modified_time","content":"2023-02-16T13:32:22.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Yandex Refresh Token Callback\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-02-16T13:32:22.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Andy Hsu\\",\\"url\\":\\"https://i.nn.ci\\"}]}"]]},"headers":[],"git":{"createdTime":1676541915000,"updatedTime":1676554342000,"contributors":[{"name":"Andy Hsu","username":"Andy Hsu","email":"i@nn.ci","commits":6,"url":"https://github.com/Andy Hsu"}]},"readingTime":{"minutes":0.07,"words":20},"filePathRelative":"tool/yandex/callback.md","localizedDate":"February 16, 2023"}');export{L as comp,Z as data};

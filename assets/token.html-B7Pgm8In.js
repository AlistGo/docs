import{d as S,O as a,V as k,$ as B,_ as C,a0 as s,o as l,g as r,a1 as u,f as p,Y as h,a as i,e as T,c as R,r as w}from"./app-CwkdwUrf.js";import{N as I}from"./Input-neduBEMU.js";import{N as P}from"./Alert-1vHi6Qdq.js";import{B as V}from"./Button-Ca40gTAi.js";import{N as j}from"./Image-ygtBT8Da.js";import"./browser-VosF3XWB.js";const q=S({__name:"Token",setup(m,{expose:t}){t();const o=a(""),e=a({uid:"",time:0,qrcode:"",sign:""}),c=a(""),f=a(""),d=a(!1);async function x(){d.value=!0,c.value="";const n=await(await fetch(k("/alist/115/auth_device_code"))).json();if(d.value=!1,n.error){c.value=n.error;return}o.value=n.code_verifier,e.value=n.resp;const N=new URL(k("/qr"));N.searchParams.set("text",e.value.qrcode),f.value=N.toString()}const _=a(!1),g=a(""),y=a({access_token:"",refresh_token:"",expires_in:0});async function b(){_.value=!0,g.value="";const n=await(await fetch(k("/alist/115/get_token"),{method:"POST",body:JSON.stringify({code_verifier:o.value,uid:e.value.uid})})).json();if(_.value=!1,n.error){g.value=n.error;return}y.value=n.resp}const v={codeVerifier:o,codeResp:e,error1:c,qrCode:f,gettingQrCode:d,generateQrcode:x,gettingToken:_,error2:g,tokenResp:y,getToken:b,get NButton(){return V},get NSpace(){return B},get NImage(){return j},get NAlert(){return P},get NInput(){return I}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}});function O(m,t,o,e,c,f){return l(),s(e.NSpace,{vertical:"",size:"large"},{default:r(()=>[e.codeVerifier?u("",!0):(l(),s(e.NButton,{key:0,block:"",type:"primary",onClick:e.generateQrcode,loading:e.gettingQrCode},{default:r(()=>t[0]||(t[0]=[p("Generate Qrcode")])),_:1},8,["loading"])),e.error1?(l(),s(e.NAlert,{key:1,title:"Error",type:"error"},{default:r(()=>[p(h(e.error1),1)]),_:1})):u("",!0),e.qrCode?(l(),s(e.NSpace,{key:2,vertical:""},{default:r(()=>[i(e.NSpace,{justify:"center"},{default:r(()=>[i(e.NImage,{width:"300",src:e.qrCode},null,8,["src"])]),_:1}),i(e.NAlert,{title:"Scan the QrCode",type:"info"},{default:r(()=>t[1]||(t[1]=[p("Use 115 APP To Scan Then Click the Button Below")])),_:1}),i(e.NButton,{size:"large",onClick:e.getToken,type:"info",block:"",loading:e.gettingToken},{default:r(()=>t[2]||(t[2]=[p("I have scan")])),_:1},8,["loading"]),e.error2?(l(),s(e.NAlert,{key:0,title:"Error",type:"error"},{default:r(()=>[p(h(e.error2),1)]),_:1})):u("",!0)]),_:1})):u("",!0),e.tokenResp.refresh_token?(l(),s(e.NSpace,{key:3,vertical:""},{default:r(()=>[t[3]||(t[3]=T("b",null,"refresh_token:",-1)),i(e.NInput,{type:"textarea",autosize:"",readonly:"",value:e.tokenResp.refresh_token},null,8,["value"]),t[4]||(t[4]=T("b",null,"access_token:",-1)),i(e.NInput,{type:"textarea",autosize:"",readonly:"",value:e.tokenResp.access_token},null,8,["value"])]),_:1})):u("",!0)]),_:1})}const Q=C(q,[["render",O],["__file","Token.vue"]]),z=S({__name:"token.html",setup(m,{expose:t}){t();const o={get Token(){return Q}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}});function G(m,t,o,e,c,f){const d=w("NaiveClient");return l(),R("div",null,[i(d,null,{default:r(()=>[i(e.Token)]),_:1})])}const L=C(z,[["render",G],["__file","token.html.vue"]]),F=JSON.parse('{"path":"/tool/115/token.html","title":"Get 115 Refresh Token","lang":"en-US","frontmatter":{"title":"Get 115 Refresh Token","toc":false,"head":[["meta",{"property":"og:url","content":"https://alist.nn.ci/tool/115/token.html"}],["meta",{"property":"og:site_name","content":"AList Docs"}],["meta",{"property":"og:title","content":"Get 115 Refresh Token"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-03-09T07:56:02.000Z"}],["meta",{"property":"article:modified_time","content":"2025-03-09T07:56:02.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Get 115 Refresh Token\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-03-09T07:56:02.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Andy Hsu\\",\\"url\\":\\"https://i.nn.ci\\"}]}"]]},"headers":[],"git":{"createdTime":1676628274000,"updatedTime":1741506962000,"contributors":[{"name":"Andy Hsu","username":"Andy Hsu","email":"i@nn.ci","commits":3,"url":"https://github.com/Andy Hsu"}]},"readingTime":{"minutes":0.07,"words":20},"filePathRelative":"tool/115/token.md","localizedDate":"February 17, 2023"}');export{L as comp,F as data};

import{d as y,ad as x,V as S,ag as C,$ as v,_ as N,a0 as s,o as n,g as _,f as d,Y as p,e as a,a1 as A,a as f,c as P,r as D}from"./app-CwkdwUrf.js";import{N as M}from"./Input-neduBEMU.js";import{N as R}from"./Alert-1vHi6Qdq.js";import"./browser-VosF3XWB.js";const j=y({__name:"Callback",setup(u,{expose:t}){t();const o=`${location.origin}/tool/dropbox/callback`,e=new URL(window.location.href),l=e.searchParams.get("code"),c=e.searchParams.get("state"),m=e.searchParams.get("error"),T=e.searchParams.get("error_description"),[k,b]=atob(c).split("::"),i=x({refreshToken:"",accessToken:"",error1:"",errorMessage1:""}),g=()=>{fetch(`${S()}/alist/dropbox/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:l,client_id:k,client_secret:b,grant_type:"authorization_code",redirect_uri:o})}).then(r=>r.json()).then(r=>{if(console.log(r),r.error){i.error1=r.error,i.errorMessage1=r.error_description;return}i.refreshToken=r.refresh_token,i.accessToken=r.access_token})};l&&c&&!m&&g();const h={redirect_uri:o,url:e,code:l,client:c,error:m,error_description:T,client_id:k,client_secret:b,data:i,getToken:g,get NAlert(){return R},get NInput(){return M},get NSpace(){return v},get NSpin(){return C}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}});function w(u,t,o,e,l,c){return!e.code||!e.client||e.error?(n(),s(e.NAlert,{key:0,title:e.error||"Error",type:"error"},{default:_(()=>[d(p(e.error_description),1)]),_:1},8,["title"])):(n(),s(e.NSpace,{key:1,vertical:"",size:"large"},{default:_(()=>[a("p",null,[t[0]||(t[0]=a("b",null,"client_id: ",-1)),d(p(e.client_id),1)]),a("p",null,[t[1]||(t[1]=a("b",null,"client_secret: ",-1)),d(p(e.client_secret),1)]),a("p",null,[t[2]||(t[2]=a("b",null,"redirect_uri: ",-1)),d(p(e.redirect_uri))]),e.data.error1||e.data.errorMessage1?(n(),s(e.NAlert,{key:0,title:e.data.error1,type:"error"},{default:_(()=>[d(p(e.data.errorMessage1),1)]),_:1},8,["title"])):A("",!0),f(e.NSpace,{vertical:""},{default:_(()=>[t[3]||(t[3]=a("b",null,"refresh_token:",-1)),!e.data.refreshToken&&!e.data.errorMessage1?(n(),s(e.NSpin,{key:0})):(n(),s(e.NInput,{key:1,type:"textarea",autosize:"",readonly:"",value:e.data.refreshToken},null,8,["value"]))]),_:1})]),_:1}))}const O=N(j,[["render",w],["__scopeId","data-v-39f0fed5"],["__file","Callback.vue"]]),V=y({__name:"callback.html",setup(u,{expose:t}){t();const o={get Callback(){return O}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}});function z(u,t,o,e,l,c){const m=D("NaiveClient");return n(),P("div",null,[f(m,null,{default:_(()=>[f(e.Callback)]),_:1})])}const Z=N(V,[["render",z],["__file","callback.html.vue"]]),E=JSON.parse('{"path":"/tool/dropbox/callback.html","title":"Dropbox Refresh Token Callback","lang":"en-US","frontmatter":{"title":"Dropbox Refresh Token Callback","toc":false,"head":[["meta",{"property":"og:url","content":"https://alist.nn.ci/tool/dropbox/callback.html"}],["meta",{"property":"og:site_name","content":"AList Docs"}],["meta",{"property":"og:title","content":"Dropbox Refresh Token Callback"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2023-06-19T15:02:49.000Z"}],["meta",{"property":"article:modified_time","content":"2023-06-19T15:02:49.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Dropbox Refresh Token Callback\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-06-19T15:02:49.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Andy Hsu\\",\\"url\\":\\"https://i.nn.ci\\"}]}"]]},"headers":[],"git":{"createdTime":1676541915000,"updatedTime":1687186969000,"contributors":[{"name":"Andy Hsu","username":"Andy Hsu","email":"i@nn.ci","commits":7,"url":"https://github.com/Andy Hsu"}]},"readingTime":{"minutes":0.07,"words":20},"filePathRelative":"tool/dropbox/callback.md","localizedDate":"February 16, 2023"}');export{Z as comp,E as data};
